services:
  identityservice:
    image: ${DOCKER_REGISTRY-}identityservice
    build:
      context: .
      dockerfile: IdentityServer/IdentityService/Dockerfile

  mssql:
    image: mcr.microsoft.com/mssql/server:2017-latest

  rabbitmq:
    image: rabbitmq:4-management-alpine

  redis:
    image: redis:alpine

  db.api:
    image: ${DOCKER_REGISTRY-}dbapi
    build:
      context: .
      dockerfile: Services/DB/DB.API/DB.API/Dockerfile

  sciconnectspa:
    image: ${DOCKER_REGISTRY-}sciconnectspa
    build:
      context: ./WebApps/SciConnectSPA
      dockerfile: Dockerfile

  analyticsservice:
    image: ${DOCKER_REGISTRY-}analyticsservice
    build:
      context: .
      dockerfile: AnalyticsService/Dockerfile

volumes:
  mssql_data:
